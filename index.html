<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Career Expert IT Solution</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    *{box-sizing:border-box} body{margin:0;font-family:Poppins,Arial,sans-serif;background:#f5f7fa;color:#333;transition:.3s}
    body.dark{background:#121212;color:#ddd}

    /* Sidebar */
    .sidebar{position:fixed;inset:0 auto 0 0;width:260px;background:#002a78;color:#fff;display:flex;flex-direction:column;gap:12px;align-items:center;padding:28px 18px}
    body.dark .sidebar{background:#1e1e1e}
    .brand{font-weight:700;font-size:22px;margin-bottom:22px}
    .nav{list-style:none;padding:0;margin:0;width:100%}
    .nav li{margin:14px 0}
    .nav a{color:#fff;text-decoration:none;display:flex;align-items:center;gap:10px}
    .nav a:hover{color:#ff7b00}
    .side-bottom{margin-top:auto;display:flex;flex-direction:column;align-items:center;gap:10px}
    .toggle{cursor:pointer}
    .social{display:flex;gap:12px}
    .social a{color:#fff}

    /* Main */
    .main{margin-left:260px;padding:60px 40px}
    section{margin-bottom:80px}
    h1,h2{color:#002a78;margin:0 0 14px}
    body.dark h1,body.dark h2{color:#ff7b00}
    .lead{max-width:650px;line-height:1.65}
    .cta{display:inline-block;background:#ff7b00;color:#fff;padding:12px 20px;border-radius:28px;text-decoration:none;font-weight:600}
    .cta:hover{background:#002a78}

    /* Cards */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:22px}
    .card{background:#fff;border-radius:14px;padding:22px;box-shadow:0 8px 20px rgba(0,0,0,.08);text-align:center}
    body.dark .card{background:#1e1e1e;box-shadow:0 8px 20px rgba(255,255,255,.05)}
    .card i{font-size:40px;color:#ff7b00;margin-bottom:10px}

    /* Contact form */
    form{max-width:620px;display:flex;flex-direction:column;gap:12px}
    input,textarea{padding:12px;border:1px solid #ccd2da;border-radius:10px;background:#fff}
    body.dark input,body.dark textarea{background:#181818;border:1px solid #444;color:#fff}
    button{background:#002a78;color:#fff;padding:12px 16px;border:none;border-radius:10px;cursor:pointer}
    button:hover{background:#ff7b00}

    footer{text-align:center;margin-top:40px;color:#666}
    body.dark footer{color:#aaa}

    /* Auth Popup */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:999}
    .popup{width:360px;max-width:92%;background:#fff;border-radius:16px;padding:24px;position:relative;box-shadow:0 12px 30px rgba(0,0,0,.25)}
    body.dark .popup{background:#1f1f1f;color:#eee}
    .popup h3{margin:0 0 10px;text-align:center}
    .popup label{font-size:14px;margin-top:8px;display:block}
    .popup input{width:100%;margin-top:6px;margin-bottom:8px}
    .row{display:flex;gap:10px;align-items:center}
    .close{position:absolute;top:10px;right:14px;cursor:pointer;font-size:20px}
    .muted{font-size:12px;opacity:.85;text-align:center;margin-top:6px}

    /* Dashboard */
    #dashboard{display:none;margin-left:260px;padding:60px 40px}
    .panel{background:#fff;border-radius:16px;padding:24px;box-shadow:0 8px 20px rgba(0,0,0,.08);max-width:820px}
    body.dark .panel{background:#1e1e1e;box-shadow:0 8px 20px rgba(255,255,255,.05)}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:880px){.main,#dashboard{margin-left:0;padding:28px 16px}.sidebar{position:static;width:100%;flex-direction:row;justify-content:space-between}.brand{margin:0}.side-bottom{display:none}}
  </style>
</head>
<body>

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="brand">Career Expert</div>
    <ul class="nav">
      <li><a href="#home"><i class="fas fa-home"></i> Home</a></li>
      <li><a href="#services"><i class="fas fa-briefcase"></i> Services</a></li>
      <li><a href="#about"><i class="fas fa-user"></i> About</a></li>
      <li><a href="#contact"><i class="fas fa-envelope"></i> Contact</a></li>
      <li><a href="#" onclick="openAuth()"><i class="fas fa-mobile-alt"></i> Login / Signup</a></li>
    </ul>
    <div class="side-bottom">
      <div class="toggle" onclick="toggleTheme()"><i class="fas fa-moon"></i></div>
      <div class="social">
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="#"><i class="fab fa-linkedin-in"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
      </div>
    </div>
  </aside>

  <!-- MAIN (Public) -->
  <main class="main" id="mainContent">
    <section id="home">
      <h1>Microsoft Office & Web Design Expert</h1>
      <p class="lead">We help businesses with professional MS Word, Excel, PowerPoint and modern, responsive web design â€” fast delivery, clean formatting, and reliable support.</p>
      <a class="cta" href="#services">View Services</a>
    </section>

    <section id="services">
      <h2>Services</h2>
      <div class="grid">
        <div class="card"><i class="fas fa-file-word"></i><h3>MS Word</h3><p>Formatting, templates, reports, letters</p></div>
        <div class="card"><i class="fas fa-file-excel"></i><h3>MS Excel</h3><p>Dashboards, automation, data analysis</p></div>
        <div class="card"><i class="fas fa-file-powerpoint"></i><h3>PowerPoint</h3><p>Impactful business presentations</p></div>
        <div class="card"><i class="fas fa-laptop-code"></i><h3>Web Design</h3><p>Responsive & SEO-friendly websites</p></div>
      </div>
    </section>

    <section id="about">
      <h2>About</h2>
      <p>Career Expert IT Solution focuses on quality, speed & reliability. From Office automation to beautiful websitesâ€”everything under one roof.</p>
    </section>

    <section id="contact">
      <h2>Contact</h2>
      <form onsubmit="event.preventDefault(); alert('Thanks! We will contact you soon.');">
        <input type="text" placeholder="Your Name" required>
        <input type="email" placeholder="Your Email" required>
        <textarea rows="5" placeholder="Your Message" required></textarea>
        <button type="submit">Send Message</button>
      </form>
    </section>

    <footer>Â© 2025 Career Expert IT Solution â€¢ All Rights Reserved</footer>
  </main>

  <!-- DASHBOARD (Private after login) -->
  <section id="dashboard">
    <div class="panel">
      <h2>Welcome, <span id="userPhone"></span> ðŸ‘‹</h2>
      <p style="margin:6px 0 18px;opacity:.85">You are logged in via verified mobile number.</p>

      <div class="two">
        <!-- Profile -->
        <div>
          <h3 style="margin:0 0 8px">Your Profile</h3>
          <form onsubmit="event.preventDefault(); saveProfile();">
            <input id="displayName" placeholder="Full Name">
            <input id="email" type="email" placeholder="Email (optional)">
            <button type="submit">Save Profile</button>
          </form>
          <p id="saveMsg" class="muted" style="text-align:left"></p>
        </div>

        <!-- Session -->
        <div>
          <h3 style="margin:0 0 8px">Session</h3>
          <p class="muted">Logged in as: <span id="userIdSmall"></span></p>
          <button onclick="logout()" style="background:#ff7b00;margin-top:8px">Logout</button>
        </div>
      </div>
    </div>
  </section>

  <!-- AUTH POPUP -->
  <div class="overlay" id="authPopup">
    <div class="popup">
      <span class="close" onclick="closeAuth()">&times;</span>
      <h3>Login / Signup with Mobile</h3>

      <label for="country">Country Code</label>
      <input id="country" value="+91" />

      <label for="mobile">Mobile Number</label>
      <input id="mobile" type="tel" placeholder="e.g. 9876543210" />

      <div id="recaptcha-container" class="muted" style="margin:8px 0 10px"></div>

      <div class="row">
        <button onclick="sendOTP()">Send OTP</button>
      </div>

      <label for="otp" style="margin-top:10px">Enter OTP</label>
      <input id="otp" placeholder="6-digit OTP" />

      <div class="row">
        <button onclick="verifyOTP()">Verify & Login</button>
      </div>

      <div class="muted">OTP is powered by Firebase Phone Auth.</div>
    </div>
  </div>

  <!-- Firebase (Compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore-compat.js"></script>

  <script>
    /* THEME */
    function toggleTheme(){
      document.body.classList.toggle("dark");
      localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
    }
    (function(){ if(localStorage.getItem("theme")==="dark") document.body.classList.add("dark"); })();

    /* FIREBASE CONFIG â€” REPLACE THIS */
    const firebaseConfig = {
      // ðŸ‘‰ Replace with your actual config from Firebase Console
      // apiKey: "YOUR_API_KEY",
      // authDomain: "YOUR_PROJECT.firebaseapp.com",
      // projectId: "YOUR_PROJECT_ID",
      // storageBucket: "YOUR_PROJECT.appspot.com",
      // messagingSenderId: "SENDER_ID",
      // appId: "APP_ID"
      ...FIREBASE_CONFIG_HERE
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db   = firebase.firestore();

    /* AUTH POPUP */
    let confirmationResultGlobal = null;
    let recaptchaVerifier = null;

    function openAuth(){
      document.getElementById("authPopup").style.display = "flex";
      if(!recaptchaVerifier){
        recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', { size: 'normal' });
        recaptchaVerifier.render();
      }
    }
    function closeAuth(){
      document.getElementById("authPopup").style.display = "none";
    }
    function fullPhone(){
      const cc = (document.getElementById("country").value || "+91").trim();
      const ph = (document.getElementById("mobile").value || "").trim();
      return cc + ph;
    }

    async function sendOTP(){
      try{
        const phone = fullPhone();
        if(phone.length < 8){ alert("Please enter a valid phone number."); return; }
        confirmationResultGlobal = await auth.signInWithPhoneNumber(phone, recaptchaVerifier);
        alert("OTP sent to " + phone);
      }catch(e){ alert("OTP send failed: " + e.message); }
    }

    async function verifyOTP(){
      try{
        if(!confirmationResultGlobal){ alert("Please send OTP first."); return; }
        const code = document.getElementById("otp").value.trim();
        const result = await confirmationResultGlobal.confirm(code);
        const user = result.user;
        await afterLogin(user);   // Create/Load profile
        closeAuth();
      }catch(e){ alert("Invalid OTP: " + e.message); }
    }

    /* AFTER LOGIN â†’ CREATE/LOAD PROFILE IN FIRESTORE */
    async function afterLogin(user){
      const phone = user.phoneNumber || fullPhone();
      const uid = user.uid;
      // Save session locally (UI state)
      localStorage.setItem("loggedIn","true");
      localStorage.setItem("loggedPhone", phone);
      localStorage.setItem("uid", uid);

      // Create doc if not exists
      const ref = db.collection("users").doc(uid);
      const snap = await ref.get();
      if(!snap.exists){
        await ref.set({
          phone: phone,
          displayName: "",
          email: "",
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
      }
      // Load profile into UI
      const doc = (await ref.get()).data() || {};
      document.getElementById("displayName").value = doc.displayName || "";
      document.getElementById("email").value = doc.email || "";

      // Show dashboard
      document.getElementById("userPhone").textContent = phone;
      document.getElementById("userIdSmall").textContent = uid;
      document.getElementById("mainContent").style.display = "none";
      document.getElementById("dashboard").style.display = "block";
    }

    /* SAVE PROFILE TO FIRESTORE */
    async function saveProfile(){
      try{
        const uid = localStorage.getItem("uid");
        if(!uid) return;
        const displayName = document.getElementById("displayName").value.trim();
        const email = document.getElementById("email").value.trim();
        await db.collection("users").doc(uid).set({
          displayName, email, updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        }, { merge:true });
        const msg = document.getElementById("saveMsg");
        msg.textContent = "Profile saved âœ…";
        setTimeout(()=> msg.textContent="", 2000);
      }catch(e){ alert("Save failed: " + e.message); }
    }

    /* LOGOUT */
    function logout(){
      auth.signOut().finally(()=>{
        localStorage.removeItem("loggedIn");
        localStorage.removeItem("loggedPhone");
        localStorage.removeItem("uid");
        document.getElementById("dashboard").style.display = "none";
        document.getElementById("mainContent").style.display = "block";
      });
    }

    /* AUTO SESSION */
    window.addEventListener("load", async ()=>{
      if(localStorage.getItem("loggedIn")==="true"){
        // Try to reattach session (Firebase preserves on refresh)
        const unsub = auth.onAuthStateChanged(async (user)=>{
          if(user){ await afterLogin(user); }
          unsub && unsub();
        });
      }
    });
  </script>
</body>
</html>
